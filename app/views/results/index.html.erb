<h2 id="csv-reports">Results</h2>

<div>
  <p>
    Note - all results here are from after 01/09/2018
  </p>
</div>

Numbers of submissions by type
<table class="u-full-width">
  <thead>
    <tr>
      <% Type::NAMES.each do |type| %>
        <th><%= type %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <tr>
      <% @type_numbers.each do |type| %>
        <td><%= type %></td>
      <% end %>
    </tr>
  </tbody>
</table>
<button>To CSV</button>

<p>Numbers of submissions by site</p>

<table class="u-full-width">
  <thead>
    <tr>
      <th>Site name</th>
      <th>Submission count</th>
      <th>Instagram</th>
      <th>Email</th>
      <th>Twitter</th>
      <th>Whatsapp</th>
    </tr>
  </thead>
  <tbody>
    <% @site_numbers.each do |site| %>
      <tr>
        <td><%= site[:name] %></td>
        <td><%= site[:submissions] %></td>
        <td><%= site[:instagram] %></td>
        <td><%= site[:email] %></td>
        <td><%= site[:twitter] %></td>
        <td><%= site[:whatsapp] %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<button>To CSV</button>
<div class="mb6">
  <h3>Reports on all submissions</h3>

  <div>
    <%= link_to 'Basic submission report', api_v1_basic_submission_report_path(format: "csv"), class: 'button' %>
  </div>
</div>

<h3>Customise reports</h3>
<div class="flex column mb6">
  <div class="w-50">
    <p>
        From date:
          <%= date_field_tag(:from_date, Date.today - 1.week, class: 'from-date') %><br/>
        To date:
          <%= date_field_tag(:from_date, Date.today, class: 'to-date') %><br/>
        Choose site: 
          <%= select_tag :site_id, options_for_select(Site.all.collect { | site | [site.name, site.id] }),  :include_blank => true, class: 'site-select'%><br/>
        
        <% tags = ActsAsTaggableOn::Tag.all.map {|t| t.name}.uniq %>
        Choose tag: 
          <%= select_tag :tag, options_for_select(tags), :include_blank => true, class: 'tag-select'%>
    </p>
  </div>
  <div class="w-50">
      <span class="db">
        Create site specific report of submission patterns (submitters and submission numbers) <br/>
        <%= link_to 'Site specific with subission patterns',  api_v1_site_specific_report_path(format: "csv", ), class: 'button', id: 'site-specific-report' %>
      </span>

      <span class="db">
        Create site specific report with all tags (manual) <br/>
        <%= link_to 'Site specific with all tags',  api_v1_site_specific_tags_report_path(format: "csv", ), class: 'button', id: 'site-specific-tag-report' %>
      </span>

      <span class="db">
        Create report specific to tags and or sites <br/>
        <%= link_to 'Manual Tags',  api_v1_all_tags_report_path(format: "csv", ), class: 'button', id: 'manual-tag-report' %>
      </span>

      <span class="db">
        AI tags to come<br/>
        <%#= link_to 'Manual Tags',  api_v1_all_tags_report_path(format: "csv", ), class: 'button', id: 'manual-tag-report' %>
      </span>
  </div>
</div>



<h3>Reports by type</h3>
<div class="flex column mb6">
  <div class="w-50">
    <h4>Submission numbers</h4>
      <%= link_to 'instagram report', api_v1_type_specific_report_path(format: "csv", type_name: 'INSTAGRAM', data: 'insta_username'), class: 'button' %>

      <%= link_to 'twitter report', api_v1_type_specific_report_path(format: "csv", type_name: 'TWITTER', data: 'twitter_username'), class: 'button'  %>

      <%= link_to 'email report', api_v1_type_specific_report_path(format: "csv", type_name: 'EMAIL', data: 'email_address'), class: 'button'  %>

      <%= link_to 'whatsapp report', api_v1_type_specific_report_path(format: "csv", type_name: 'WHATSAPP', data: 'number'), class: 'button'  %>
  </div>

  <div class="w-50">
    <h4>Image quality</h4>

    <%= link_to 'instagram report', api_v1_image_quality_report_path(format: "csv", type_name: 'INSTAGRAM'), class: 'button'  %>
    <%= link_to 'twitter report', api_v1_image_quality_report_path(format: "csv", type_name: 'TWITTER'), class: 'button'  %>
    <%= link_to 'email report', api_v1_image_quality_report_path(format: "csv", type_name: 'EMAIL'), class: 'button'  %>
    <%= link_to 'whatsapp report', api_v1_image_quality_report_path(format: "csv", type_name: 'WHATSAPP'), class: 'button'  %>
  </div>
</div>


<h3>Start job to Zip all images</h3>
<div class="flex flex-wrap column justify-between">
<% Site.all.each do |site| %>
  <p>
    <%= link_to site.name, api_v1_zip_images_path(site_id: site.id), class: 'button'  %>
  </p>
<% end %>
</div>

<h3>Download zip of all images (ensure to leave enough time)</h3>
<div class="flex flex-wrap column justify-between">
  <p>
    <%= link_to 'Download image Zip', api_v1_download_zip_path, class: 'button'  %>
  </p>
</div>